# windows, get python path
(Get-Command python).Source

# windows
./.venv/Scripts/Activate.ps1

===

python font_preview.py input/JetBrainsMonoNL-Regular.ttf "0O1Il|" output/JetBrainsMonoNL-Regular --debug

===

python ttf/scale_ttf.py input\NotoSansMonoCJKhk-VF.ttf input\JetBrainsMonoNL-Regular.ttf output/cjk0.ttf

python ttf/dump_data_yaml.py output/cjk0.ttf output/cjk0.data.yaml

python ttf/dump_char_csv.py input/JetBrainsMonoNL-Regular.ttf output/JetBrainsMonoNL-Regular.char.csv
python ttf/dump_char_csv.py output/cjk0.ttf output/cjk0.char.csv

python ttf/filter_char_csv.py output/JetBrainsMonoNL-Regular.char.csv  ascii output/JetBrainsMonoNL-Regular.ascii.csv
python ttf/filter_char_csv.py output/JetBrainsMonoNL-Regular.char.csv  upper,number output/JetBrainsMonoNL-Regular.big.csv
python ttf/filter_char_csv.py output/cjk0.char.csv common_cjk output/cjk0.ccjk.csv

python ttf/list_extreme_y.py output/JetBrainsMonoNL-Regular.ascii.csv output/JetBrainsMonoNL-Regular.ascii.extremey.csv
python ttf/list_extreme_y.py output/cjk0.ccjk.csv  output/cjk0.ccjk.extremey.csv

# $@g宺涄

python ttf/cal_shift_y.py output/JetBrainsMonoNL-Regular.big.csv output/cjk0.ccjk.csv output/shift.yaml

python ttf/font_shift_y.py output/cjk0.ttf output/shift.yaml output/cjk1.ttf

python ttf/dump_char_csv.py output/cjk1.ttf output/cjk1.char.csv

python ttf/pick_font.py output/JetBrainsMonoNL-Regular.char.csv,output/cjk1.char.csv output/pick.char.csv

python ttf/cal_meta.py output/JetBrainsMonoNL-Regular.ascii.csv output/JetBrainsMonoNL-Regular.big.csv --height-multiplier 1.3 output/pick.meta.yaml

# python ttf/merge_font.py input/JetBrainsMonoNL-Regular.ttf output/cjk1.ttf output/pick.char.csv output/pick.meta.yaml --output output/test.ttf
python ttf/merge_font.py input/JetBrainsMonoNL-Regular.ttf,output/cjk1.ttf output/pick.char.csv output/pick.meta.yaml --output output/test.ttf

python ttf/dump_data_yaml.py output/test.ttf output/test.data.yaml

python font_preview.py output/test.ttf "$@g宺涄" output/test --debug
python font_preview.py output/test.ttf "你好 0O1Il| $@g宺涄" output/test --debug
python font_preview.py output/test.ttf "你好 0O1Il| $@g宺涄" output/test

python ttf/dump_char_csv.py output/test.ttf output\test.char.csv
python ttf/csv_compare_box.py output\pick.char.csv output\test.char.csv

python ttf/check_mono_width.py output\test.ttf

===

python ttf/merge_font.py input/JetBrainsMonoNL-Regular.ttf,output/cjk1.ttf output/pick.char.csv output/pick.meta.yaml --input-info-meta-yaml CodeCJK/codecjk_meta.yaml --font-name CodeCJK004 --output output/CodeCJK004_DATETIME.ttf

python ttf/dump_data_yaml.py output/CodeCJK004_20251230164529.ttf output/CodeCJK004_20251230164529.data.yaml

===

create a new python main script ttf/cal_meta.py

* args:
  * input_font_csv: a csv file created by ttf/dump_char_csv.py, take output/JetBrainsMonoNL-Regular.ascii.csv as example
  * output_yaml: a yaml file contains the calculated meta data
* output yaml:
  * half_advance_width: the advance_width of common half width char
  * full_advance_width: the advance_width of full width char, must be half_advance_width * 2
  * min_yMin / max_yMax
  * char_height: max_yMax-min_yMin
  * font_height: char_height*1.2
  * ascender / descender: based on font_height, min_yMin, max_yMax.  ascender extend 60%, descender extend 40%.

===

Create main script ttf/merge_font.py

* args:
  * input_ttf_list: a input ttf file list, seperated by comma, e.g. input/JetBrainsMonoNL-Regular.ttf,output/cjk1.ttf
  * input_pick_csv: a csv file created by ttf/pick_font.py, take output/pick.char.csv as example
  * input_meta_yaml: a yaml file created by ttf/cal_meta.py, take output/pick.meta.yaml as example
  * vendor_id: os/2 vendor id
    * if not given, use MOME
  * font_name: the name of the font
    * if not given, use test{yyyymmddhhmmss}
  * output_ttf: the output ttf file
    * if not given, use output/test{yyyymmddhhmmss}.ttf
* create a new ttf file output_ttf, combine ttf in input_ttf_list
* the new ttf should be a new ttf instance from fonttools
* input_pick_csv pick column decide which ttf to be used on the char, 0=first, 1=second, etc
* for is_full_width is true, advance width should be full_advance_width in input_meta_yaml, otherwise half_advance_width
* mark the font as monospace, take monomerge.py as reference.
* update unicode support range table
* ascender and descender follow input_meta_yaml
* version is {yyyymmddhhmmss}
* for all other information meta data, just put "created by MonoMerge"

===

create a new python main script ttf/dump_data_yaml.py
* input args
  * input_ttf: the ttf file to inspect
  * output_ymal: the font data yaml
* dump as much data/metadata as much as it can
* do not dump per characters data

python ttf/dump_data_yaml.py input/JetBrainsMonoNL-Regular.ttf output/JetBrainsMonoNL-Regular.data.yaml
python ttf/dump_data_yaml.py input/mingliu.ttc --font-index=0 output/mingliu-0.data.yaml
python ttf/dump_data_yaml.py output/test.ttf output/test.data.yaml

===

Created a new font using:

python ttf/merge_font.py input/JetBrainsMonoNL-Regular.ttf output/cjk1.ttf output/pick.char.csv output/pick.meta.yaml --output output/test.ttf

But in dp4 font viewer, the advance of full width char are half width, not full width.

font data can be dump by:
python ttf/dump_data_yaml.py input/mingliu.ttc --font-index=0 output/mingliu-0.data.yaml
python ttf/dump_data_yaml.py output/test.ttf output/test.data.yaml
python ttf/dump_data_yaml.py output/CodeCJK002_20251229000015.ttf output/codecjk.data.yaml

Compare output/test.data.yaml and output/mingliu-0.data.yaml, check the reason why the full width char in output/test.ttf only advance in half width, and fix.

The script ttf/dump_data_yaml.py can be modified to dump more data if you need.

Moreover, output/CodeCJK002_20251229000015.ttf is created by following command:

python3 monomerge.py -l input/consola.ttf -c input/NotoSansMonoCJKhk-Regular.otf --cjk-y-offset=-81 -o output/CodeCJK_DATETIME.ttf -n CodeCJK

And it display ok in dp4.
I guess there is some meta data from input/NotoSansMonoCJKhk-Regular.otf which make the font advance well.


===

some more fact may useful for debug
The font file output/CodeCJK002_20251229000015.ttf is created via following command:

python3 monomerge.py -l input/consola.ttf -c input/NotoSansMonoCJKhk-Regular.otf --cjk-y-offset=-81 -o output/CodeCJK_DATETIME.ttf -n CodeCJK

And it display ok in dp4.
I guess there is some meta data from input/NotoSansMonoCJKhk-Regular.otf which make the font advance well.

===

Change ttf/pick_font.py:
* args:
  * input_csv_list: list of input font csv, seperated by comma, generated by dump_char_csv.py. e.g "output/JetBrainsMonoNL-Regular.char.csv,output/cjk1.char.csv"
  * output_csv: no Change
* logic: for all char data in each csv:
  * if char exist in first csv, and (advance_width>0), and not is_empty_glyph. if yes, pick first csv as the char font
  * else, check if second csv match the condition. if yes, pick second csv
  * keep try third and forth csv.
  * if none of csv match, check if char exist in first csv, no need to check advance_width and is_empty_glyph. if yes, pick first csv as the char font.
  * else, check the second, third, forth csv.
* Assume the input csv files is sorted by codepoint_dec
* The output csv should also sorted by codepoint_dec
* Avoid loading whole csv data into memory
* Create new column "pick", first=0, second=1...

===

Create a new python script ttf/remove_table.py

* args:
  * input_ttf: the input ttf file
  * output_ttf: the output ttf file
* Remove GPOS and GSUB tables from the ttf file

python ttf/remove_table.py output/CodeCJK002_20251229000015.ttf output/tmp.ttf

===

A font file is generated by following command

python ttf/merge_font.py input/JetBrainsMonoNL-Regular.ttf,output/cjk1.ttf output/pick.char.csv output/pick.meta.yaml --output output/test.ttf

The bound of each char is extract from following command

python ttf/dump_char_csv.py output/test.ttf output/test.char.csv

it show that the bar char (U+007C) is from output/cjk1.ttf, but it should be from input/JetBrainsMonoNL-Regular.ttf

===

Create a script csv_compare_box.py to compare two csv

* args
  * input_csv_0, input_csv_1: the csv to compare, take output\test.char.csv as example
* for each codepoint_dec, compare the advance_width,lsb,xMin,yMin,xMax,yMax,width,height,is_full_width,is_empty_glyph,is_composite,num_contours values
* print out if not match

===

Create a script ttf/scale_ttf.py

* args
  * input_scale_ttf: the ttf to be scaled, e.g. input\NotoSansMonoCJKhk-VF.ttf
  * input_target_ttf: the ttf to be matched, e.g. input\JetBrainsMonoNL-Regular.ttf
  * output_ttf: the scaled ttf
* get the advance width of char O from input_scale_ttf, input_target_ttf
  * if the width match, just copy input_scale_ttf to output_ttf
  * other wise, scale the input_scale_ttf to match input_target_ttf
* advance width should be scaled
* all glyph should be scaled
* Hinting should be scaled
* units_per_em should NOT be scaled
* All other coordinate should be scaled
* the center of scaling should be 0,0

===

Create a script utils/csv_query.py
* args
  * input_csv: the csv to csv_query
  * search_column: the column to search
  * search_value: the value to search
  * pull_column: the column to pull out
* scan the csv, when there exist search_column = search_value, print out the value of pull_column
* if search_column or pull_column not exist, exit 1
* if value not find, exit 1

===

Create a script ttf/ttf_replace_meta.py
* args
  * input_ttf
  * replace_from: the text replace from
  * replace_to: the text replace to
  * output_ttf
* scan all meta data in the ttf, replace all replace_from to replace_to

===

Create a script ttf/ttf_unmono.py
* args
  * input_ttf, output_ttf
* remove the monospace mark done in ttf/merge_font.py line 311

===

Convert CodeCJK\build.sh to CodeCJK\build.py
* The script can be run in any folder
* The script can be run in Linux and windows
* The output and tmp folders are created in working folder

a09618fdaaa2aef4b7b45e26b7267763

===

create ttf/cal_x_shift_csv.py
* args
  * input_csv
  * advance_width
  * output_csv
* for half width char, new_advance_width = advance_width
* for full width char, new_advance_width = advance_width * 2
* shift_x = (new_advance_width-old_advance_width)/2
* put shift_x column and new_advance_width to csv


create ttf/modify_advance_width.py
* args
  * input_ttf
  * input_shift_x_csv
    * created by ttf/cal_x_shift_csv.py
  * output_ttf
* update the advance_width and x position of each char

python \
  ttf/modify_advance_width.py \
  CodeCJK/build/tmp/patch0.scaled.ttf \
  "CodeCJK/build/tmp/patch0.scaled.char.shift_x.csv" \
  "CodeCJK/build/tmp/patch0.scaled.aw.ttf"

===

modify ttf/dump_char_csv.py
* new arg list:
  * input_ttf
  * output_codepoint_csv
  * output_glyph_csv
  * remove output_csv
* output_codepoint_csv contains:
  * codepoint
  * codepoint_dec
  * glyph_name
* output_glyph_csv contains:
  * glyph_name
  * advance_width
  * lsb
  * xMin
  * yMin
  * xMax
  * yMax
  * width
  * height
  * width_count
    * if advance_width <= 0, 0
    * if advance_width <= (1*2)**0.5, 1
    * if advance_width <= (2*3)**0.5, 2
    * if advance_width <= (3*4)**0.5, 3
    * ...etc
  * is_empty_glyph
  * is_composite
  * num_contours
  
python \
  ttf/dump_char_csv.py \
  "CodeCJK/build/tmp/base.ttf" \
  "CodeCJK/build/tmp/base.codepoint.csv" \
  "CodeCJK/build/tmp/base.glyph.csv"
  
create ttf/ttf_rm_unused_table.py
* args:
  * input_ttf, output_ttf
* delete gpos, gsub table

create ttf/glyphcsv_used_mark_rm.py
* args:
  * input_csv
    * a csv created by ttf/dump_char_csv.py
    * example: CodeCJK/build/tmp/base.ttf.glyph.csv
  * output_csv
* if (cmap_used=0 and glyf_used=0), rm=1, else rm=0

create ttf/ttf_rm_glyph.py
* args:
  * input_ttf
  * input_rm_glyph_csv
    * csv created by ttf/glyphcsv_used_mark_rm.py
  * output_ttf
* if rm=1, remove the glyph

.venv/bin/python "ttf/ttf_rm_glyph.py" \
        "CodeCJK/build/tmp/tmp1.ttf" \
        "CodeCJK/build/tmp/base.ttf.glyph.rm.csv" \
        "CodeCJK/build/tmp/tmp2.ttf"

.venv/bin/python \
  /home/luzi82/project/mono-merge/ttf/dump_char_csv.py \
  CodeCJK/build/tmp/tmp2.ttf \
  CodeCJK/build/tmp/tmp2.ttf.codepoint.csv \
  CodeCJK/build/tmp/tmp2.ttf.glyph.csv


create new script ttf/cal_cmap_proxy_csv.py
* args:
  * input_codepoint_csv, eg. CodeCJK/build/tmp/cjk.z00.03.rut.rg.ttf.codepoint.csv
  * input_glyph_csv, eg. CodeCJK/build/tmp/cjk.z00.03.rut.rg.ttf.glyph.csv
  * output_codepoint_csv
  * output_glyph_csv
* in output_glyph_csv
  * for glyph which is both:
    * cmap_used >= 1
    * glyf_used >= 1
  * new_glyph_name = glyph_name + ".cmapproxy"
  * otherwise, new_glyph_name = glyph_name
* in output_codepoint_csv
  * add column new_glyph_name, refact to output_glyph_csv new_glyph_name


create new arg output_new_glyph_csv
for all glyph_name changes, put into the csv
column: old_glyph_name, new_glyph_name

rename output_new_glyph_csv to output_cmapproxy_csv

remove new_glyph_name from output_glyph_csv
but output_codepoint_csv still keep the new_glyph_name value

update output_glyph_csv:
* for glyph which is both:
  * cmap_used >= 1
  * glyf_used >= 1
* create a new glyph_name row
  * glyph_name = glyph_name + ".cmapproxy"
  * glyf_used = 0
  * other value follow old row
* update old row
  * cmap_used = 0

change ttf/cal_cmap_proxy_csv.py
* output_codepoint_csv
  * glyph_name = new_glyph_name
  * remove new_glyph_name

update output_codepoint_csv output:
* for cmapproxy replaced row:
  * is_composite = True
  * num_contours = -1

update output_glyph_csv output:
* for cmapproxy replaced row:
  * num_contours = True
  * num_contours = -1

.venv/bin/python \
  "ttf/cal_cmap_proxy_csv.py" \
  "CodeCJK/build/tmp/patch0.z00.03.rut.rg.ttf.codepoint.csv" \
  "CodeCJK/build/tmp/patch0.z00.03.rut.rg.ttf.glyph.csv" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.ttf.cmapproxy.csv" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.ttf.codepoint.csv" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.ttf.glyph.csv"

create new script ttf_apply_cmapproxy.py
* args
  * input_ttf
  * input_cmapproxy_csv
    * created by ttf/cal_cmap_proxy_csv.py output_cmapproxy_csv
    * eg. CodeCJK/build/tmp/patch0.z00.xx.rut.rg.ttf.cmapproxy.csv
  * output_ttf
* for each row in input_cmapproxy_csv
  * in glyf table, create new composite glyf, glyph_name=new_glyph_name, identical point to old_glyph_name
* for each codepoint, if the glyf is in old_glyph_name, update to new_glyph_name

.venv/bin/python \
  "ttf/ttf_apply_cmapproxy.py" \
  "CodeCJK/build/tmp/patch0.z00.03.rut.rg.ttf" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.ttf.cmapproxy.csv" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.cmapproxy.ttf"

.venv/bin/python \
  "ttf/dump_char_csv.py" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.cmapproxy.ttf" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.cmapproxy.ttf.codepoint.csv" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.cmapproxy.ttf.glyph.csv" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.cmapproxy.ttf.glyphref.csv"

diff \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.cmapproxy.ttf.codepoint.csv" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.ttf.codepoint.csv"

diff \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.cmapproxy.ttf.glyph.csv" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.ttf.glyph.csv"


===

.venv/bin/python \
        "ttf/ttf_rm_glyph.py" \
        "CodeCJK/build/tmp/cjk.z00.01.rut.ttf" \
        "CodeCJK/build/tmp/cjk.z00.02.rm_glyph.csv" \
        "CodeCJK/build/tmp/cjk.z00.03.rut.rg.ttf"

ots-sanitize "CodeCJK/build/tmp/cjk.z00.03.rut.rg.ttf"

===

create a script in utils/diff.py
* args:
  * FILE1, FILE2
* print out a diff format output, just like "diff FILE1 FILE2"
* if same return 0, if diff return 1, if trouble or else return 2

.venv/bin/python \
  "utils/diff.py" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.cmapproxy.ttf.codepoint.csv" \
  "CodeCJK/build/tmp/patch0.z00.xx.rut.rg.ttf.glyph.csv"

diff tmp/diff0.txt tmp/diff1.txt

.venv/bin/python \
  "utils/diff.py" \
  tmp/diff0.txt tmp/diff1.txt

===

create a script ttf/ttf_glyphname_suffix.py
* args:
  * input_ttf
  * suffix
  * output_ttf
* add suffix to all glyph names

.venv/bin/python \
  "ttf/ttf_glyphname_suffix.py" \
  "CodeCJK/build/tmp/cjk.z00.06.cmapproxy.ttf" \
  ".cjk" \
  "CodeCJK/build/tmp/cjk.z00.07.suffix.ttf"

.venv/bin/python \
  "ttf/dump_char_csv.py" \
  "CodeCJK/build/tmp/cjk.z00.07.suffix.ttf"

ots-sanitize "CodeCJK/build/tmp/base.z00.07.suffix.ttf"

===

create a script ttf/ttf_post3.py
* args
  * input_ttf, output_ttf
* convert post table formatType to 3

python ttf/ttf_post3.py \
  "CodeCJK/build/tmp/cjk.z00.01.ttf" \
  "CodeCJK/build/tmp/cjk.z00.02.ttf" \

python ttf/ttf_post3.py \
  "CodeCJK/build/tmp/base.z00.01.ttf" \
  "CodeCJK/build/tmp/base.z00.02.ttf" \

python ttf/ttf_post3.py \
  "CodeCJK/build/tmp/patch0.z00.01.ttf" \
  "CodeCJK/build/tmp/patch0.z00.02.ttf" \

ots-sanitize "CodeCJK/build/tmp/cjk.z00.02.ttf"
ots-sanitize "CodeCJK/build/tmp/base.z00.02.ttf"
ots-sanitize "CodeCJK/build/tmp/patch0.z00.02.ttf"

===

change ttf/ttf_apply_cmapproxy.py
* input_cmapproxy_csv is created by ttf/cal_cmap_proxy_csv.py output_cmapproxy_csv
  * example: CodeCJK/build/tmp/patch0.z00.05.cmapproxy.csv
* no longer set glyph name for new glyf data
* no longer use formatType 2.0, keep 3.0
  * if source formatType is not 3.0, raise exception
* for each row in input_cmapproxy_csv, create proxy composite glyf
* update cmap codepoint to proxy glyf if exist in input_cmapproxy_csv

python \
            "ttf/ttf_apply_cmapproxy.py" \
            "CodeCJK/build/tmp/patch0.z00.04.ttf" \
            "CodeCJK/build/tmp/patch0.z00.05.cmapproxy.csv" \
            "CodeCJK/build/tmp/patch0.z00.06.ttf"


ots-sanitize "CodeCJK/build/tmp/patch0.z00.06.ttf"

diff \
  CodeCJK/build/tmp/patch0.z00.06.ttf.codepoint.csv \
  CodeCJK/build/tmp/patch0.z00.05.expect.codepoint.csv

diff \
  CodeCJK/build/tmp/patch0.z00.06.ttf.glyph.csv \
  CodeCJK/build/tmp/patch0.z00.05.expect.glyph.csv

===

create a new python script utils/csv_rm_column.py
* args
  * input_csv
  * rm_column_list
    * list of column to be removed, seperated by comma
  * output_csv

.venv/bin/python \
  utils/csv_rm_column.py \
  CodeCJK/build/tmp/patch0.z00.06.ttf.glyph.csv \
  glyph_name \
  CodeCJK/build/tmp/patch0.z00.07.actual.csv

.venv/bin/python \
  utils/csv_rm_column.py \
  CodeCJK/build/tmp/patch0.z00.05.expect.glyph.csv \
  glyph_name \
  CodeCJK/build/tmp/patch0.z00.07.expect.csv

diff \
  CodeCJK/build/tmp/patch0.z00.07.actual.csv \
  CodeCJK/build/tmp/patch0.z00.07.expect.csv

===

in CodeCJK/_func.py
* create new function check_font
  * args
    * ttf_path
  * when in linux, use ots-sanitize to check if the font is ok
  * when in other platform, just pass
  * when fail, raise exception

===

in ttf/scale_ttf.py
* change arg input_scale_ttf to input_ttf
* after arg input_ttf, add arg input_glyph_csv
  * example: CodeCJK/build/tmp/patch0.z01.00.ttf.glyph.csv
* in input_glyph_csv, if cmap_used >= 1 and glyf_used >= 1, raise exception
* in input_glyph_csv, if cmap_used >= 1, scale up the glyph
* in input_glyph_csv, use glyph_index to match glyph, not glyph_name
* if vmtx or vhea exist, raise exception

2.206625

.venv/bin/python \
    "ttf/dump_data_yaml.py" \
    "CodeCJK/build/tmp/patch0.z01.00.ttf" \
    "CodeCJK/build/tmp/patch0.z01.00.ttf.data.yaml"

.venv/bin/python \
    "ttf/dump_char_csv.py" \
    "CodeCJK/build/tmp/patch0.z01.00.ttf" && \
.venv/bin/python \
    "ttf/scale_ttf.py" \
    "CodeCJK/build/tmp/patch0.z01.00.ttf" \
    "CodeCJK/build/tmp/patch0.z01.00.ttf.glyph.csv" \
    2.206625 \
    "CodeCJK/build/tmp/patch0.z01.02.ttf" && \
.venv/bin/python \
    "ttf/dump_char_csv.py" \
    "CodeCJK/build/tmp/patch0.z01.02.ttf"

.venv/bin/python \
    "ttf/dump_data_yaml.py" \
    "CodeCJK/build/tmp/patch0.z01.02.ttf" \
    "CodeCJK/build/tmp/patch0.z01.02.ttf.data.yaml"

comparing CodeCJK/build/tmp/patch0.z01.00.ttf.codepoint.csv and CodeCJK/build/tmp/patch0.z01.02.ttf.codepoint.csv
it show most characters, for example, A, are not scaled well

pass

===

Create new script ttf/ttf_decompose_composite_glyph.py
* args:
  * input_ttf, output_ttf
* decompose composite glyph

.venv/bin/python \
  "ttf/ttf_decompose_composite_glyph.py" \
  "CodeCJK/build/tmp/base.z01.00.ttf" \
  "CodeCJK/build/tmp/base.z01.01.ttf" \
&& \
.venv/bin/python \
  "ttf/dump_char_csv.py" \
  "CodeCJK/build/tmp/base.z01.01.ttf" \

in CodeCJK/build/tmp/base.z01.01.ttf.codepoint.csv, line 116,
it show is_composite=True

===

Create new script utils/csv_set_col.py
* args:
  * input_csv
  * key_value_pairs
    * format example: key0:value0,key1:value1...
  * output_csv

===

Update script utils/csv_dump_col.py

from

* args:
  * input_csv
  * columns
    * list of columns, seperated by comma
  * --header
    * include header in output, otherwise no header
* print the value of the columns in each row to stdout, one line per row

.venv/bin/python \
  "utils/csv_dump_col.py" \
  "CodeCJK/build/tmp/base.z01.01.ttf.codepoint.csv" \
  "num_contours"

===

Create script ttf/ttf_set_data.py

* args:
  * input_ttf
  * units_per_em
    * optional
    * update head.unitsPerEm
  * output_ttf

===

change ttf/dump_data_yaml.py
* hide tableTag in output_yaml
* reference: CodeCJK/build/tmp/patch0.z04.00.ttf.data.yaml
